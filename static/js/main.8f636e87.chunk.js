(this["webpackJsonpreact_people-table-advanced"]=this["webpackJsonpreact_people-table-advanced"]||[]).push([[0],{33:function(e,t,c){},35:function(e,t,c){},36:function(e,t,c){},37:function(e,t,c){"use strict";c.r(t);var n=c(13),a=c.n(n),r=c(5),s=(c(20),c(21),c(2)),l=c(3),i=c(1),o=c(14),j=c.n(o);function d(){return(e=500,new Promise((function(t){return setTimeout(t,e)}))).then((function(){return fetch("https://mate-academy.github.io/react_people-table/api/people.json")})).then((function(e){return e.json()}));var e}c(33);var u=c(0),b=function(){return Object(u.jsx)("div",{className:"Loader","data-cy":"loader",children:Object(u.jsx)("div",{className:"Loader__content"})})},h=c(7),m=c.n(h),O=(c(35),function(e){var t=e.person,c=Object(r.d)(),n=Object(l.a)(c,1)[0];return Object(u.jsx)(r.b,{to:"/people/".concat(t.slug,"?").concat(n.toString()),className:m()({female:"f"===t.sex,male:"m"===t.sex}),children:t.name})}),x=(c(36),function(e){var t,c=e.people,n=Object(s.h)().slug,a=Object(r.d)(),i=Object(l.a)(a,2),o=i[0],j=i[1],d=o.get("sortBy"),b=o.get("sortOrder");switch(d){case"name":case"sex":t=function(e,t){return e[d].localeCompare(t[d])};break;case"born":case"died":t=function(e,t){return e[d]-t[d]};break;default:t=function(){return 0}}var h="desc"===b?-1:1;c.sort((function(e,c){return t(e,c)*h}));var x=function(e,t){return e?Object(u.jsx)(O,{person:e}):Object(u.jsx)("span",{className:"not-link",children:t||"-"})},p=function(e){o.set("sortBy",e.currentTarget.dataset.name||""),o.set("sortOrder","asc"===b?"desc":"asc"),j(o)};return Object(u.jsxs)("table",{"data-cy":"peopleTable",className:" table is-bordered is-striped is-hoverable is-narrow is-fullwidth ",children:[Object(u.jsx)("thead",{children:Object(u.jsxs)("tr",{children:[["Name","Sex","Born","Died"].map((function(e){return Object(u.jsxs)("th",{"data-name":e.toLowerCase(),className:m()("sorting-title",{"sort-both":d!==e.toLowerCase(),"sort-asc":d===e.toLowerCase()&&"asc"===b,"sort-desc":d===e.toLowerCase()&&"desc"===b}),onClick:p,children:[e,Object(u.jsx)("span",{className:m()({hidden:d!==e.toLowerCase()}),children:"*"})]},e)})),Object(u.jsx)("th",{children:"Mother"}),Object(u.jsx)("th",{children:"Father"})]})}),Object(u.jsx)("tbody",{children:c.map((function(e){return Object(u.jsxs)("tr",{"data-cy":"person",className:m()({"has-background-warning":n===e.slug}),children:[Object(u.jsx)("td",{children:Object(u.jsx)(O,{person:e})}),Object(u.jsx)("td",{children:e.sex}),Object(u.jsx)("td",{children:e.born}),Object(u.jsx)("td",{children:e.died}),Object(u.jsx)("td",{children:x(e.mother,e.motherName)}),Object(u.jsx)("td",{children:x(e.father,e.fatherName)})]},e.slug)}))})]})}),p=c(15),f=function(e){var t=e.people,c=e.setPeople,n=Object(i.useState)(""),a=Object(l.a)(n,2),r=a[0],s=a[1],o=Object(i.useState)(""),j=Object(l.a)(o,2),d=j[0],b=j[1],h=Object(i.useState)(""),m=Object(l.a)(h,2),O=m[0],x=m[1],f=Object(i.useState)(""),v=Object(l.a)(f,2),N=v[0],g=v[1],y=Object(i.useState)(""),C=Object(l.a)(y,2),w=C[0],k=C[1],S=Object(i.useState)(""),L=Object(l.a)(S,2),q=L[0],P=L[1];return Object(u.jsxs)("form",{children:[Object(u.jsx)("div",{className:"field",children:Object(u.jsx)("div",{className:"control",children:Object(u.jsx)("input",{className:"input",type:"text",placeholder:"Name",required:!0,value:r,onChange:function(e){return s(e.target.value)}})})}),Object(u.jsx)("div",{className:"field",children:Object(u.jsxs)("div",{className:"control",children:[Object(u.jsxs)("label",{className:"radio",children:[Object(u.jsx)("input",{type:"radio",name:"sex",value:"m",required:!0,checked:"m"===d,onChange:function(e){return b(e.target.value)}}),"Male"]}),Object(u.jsxs)("label",{className:"radio",children:[Object(u.jsx)("input",{type:"radio",name:"sex",value:"f",required:!0,checked:"f"===d,onChange:function(e){return b(e.target.value)}}),"Female"]})]})}),Object(u.jsx)("div",{className:"field",children:Object(u.jsx)("div",{className:"control",children:Object(u.jsx)("input",{className:"input",type:"number",placeholder:"Born",required:!0,value:O,onChange:function(e){return x(e.target.value)}})})}),Object(u.jsx)("div",{className:"field",children:Object(u.jsx)("div",{className:"control",children:Object(u.jsx)("input",{className:"input",type:"number",placeholder:"Died",required:!0,value:N,onChange:function(e){return g(e.target.value)}})})}),Object(u.jsx)("div",{className:"field",children:Object(u.jsx)("div",{className:"control",children:Object(u.jsx)("div",{className:"select",children:Object(u.jsxs)("select",{name:"mother",id:"mother",required:!0,value:w,onChange:function(e){return k(e.target.value)},children:[Object(u.jsx)("option",{value:"",children:"Mother"}),t.filter((function(e){return"f"===e.sex})).map((function(e){return Object(u.jsx)("option",{value:e.name,children:e.name},e.slug)}))]})})})}),Object(u.jsx)("div",{className:"field",children:Object(u.jsx)("div",{className:"control",children:Object(u.jsx)("div",{className:"select",children:Object(u.jsxs)("select",{name:"father",id:"father",required:!0,value:q,onChange:function(e){return P(e.target.value)},children:[Object(u.jsx)("option",{value:"",children:"Father"}),t.filter((function(e){return"m"===e.sex})).map((function(e){return Object(u.jsx)("option",{value:e.name,children:e.name},e.slug)}))]})})})}),Object(u.jsx)("div",{className:"field",children:Object(u.jsx)("div",{className:"control",children:Object(u.jsx)("button",{type:"submit",className:"button is-link",onClick:function(e){e.preventDefault(),c([].concat(Object(p.a)(t),[{name:r,sex:d,born:+O,died:+N,fatherName:q||null,motherName:w||null,slug:r.toLowerCase().split(" ").join("-")+O,mother:t.find((function(e){return e.name===w})),father:t.find((function(e){return e.name===q}))}])),s(""),b(""),x(""),g(""),k(""),P("")},children:"Submit"})})})]})},v=function(){var e=Object(i.useState)([]),t=Object(l.a)(e,2),c=t[0],n=t[1],a=Object(i.useState)(!0),s=Object(l.a)(a,2),o=s[0],h=s[1],m=Object(i.useState)(!1),O=Object(l.a)(m,2),p=O[0],v=O[1],N=Object(r.d)(),g=Object(l.a)(N,2),y=g[0],C=g[1],w=y.get("query")||"",k=Object(i.useState)(w),S=Object(l.a)(k,2),L=S[0],q=S[1],P=Object(i.useCallback)(j()((function(e){e?y.set("query",e):y.delete("query"),C(y)}),500),[]),T=c.filter((function(e){var t,c,n=w.toLowerCase();return e.name.toLowerCase().includes(n)||(null===(t=e.fatherName)||void 0===t?void 0:t.toLowerCase().includes(n))||(null===(c=e.motherName)||void 0===c?void 0:c.toLowerCase().includes(n))}));return Object(i.useEffect)((function(){d().then((function(e){n(e.map((function(t){var c=t,n=e.find((function(e){return e.name===t.motherName})),a=e.find((function(e){return e.name===t.fatherName}));return n&&(c.mother=n),a&&(c.father=a),c})))})).catch((function(){return v(!0)})).finally((function(){return h(!1)}))}),[]),Object(u.jsxs)(u.Fragment,{children:[Object(u.jsx)("h1",{className:"title",children:"People Page"}),o&&Object(u.jsx)(b,{}),p&&Object(u.jsx)("p",{"data-cy":"peopleLoadingError",className:"has-text-danger",children:"Something went wrong"}),!o&&!p&&0===c.length&&Object(u.jsx)("p",{"data-cy":"noPeopleMessage",children:"There are no people on the server"}),!o&&!p&&0!==c.length&&Object(u.jsxs)(u.Fragment,{children:[Object(u.jsx)("div",{className:"block",children:Object(u.jsx)("div",{className:"box",children:Object(u.jsx)(f,{people:c,setPeople:n})})}),Object(u.jsx)("div",{className:"block",children:Object(u.jsxs)("div",{className:"box table-container",children:[Object(u.jsx)("div",{className:"field",children:Object(u.jsx)("div",{className:"control",children:Object(u.jsx)("input",{type:"text","data-cy":"filterInput",className:"input",placeholder:"Query",value:L,onChange:function(e){q(e.currentTarget.value),P(e.currentTarget.value)}})})}),Object(u.jsx)(x,{people:T})]})})]})]})};function N(e){return"navbar-item ".concat(e?"has-background-grey-lighter":"")||!1}var g=function(){return Object(u.jsxs)("div",{"data-cy":"app",children:[Object(u.jsx)("nav",{"data-cy":"nav",className:"navbar is-fixed-top has-shadow",role:"navigation","aria-label":"main navigation",children:Object(u.jsx)("div",{className:"container",children:Object(u.jsxs)("div",{className:"navbar-brand",children:[Object(u.jsx)(r.c,{className:function(e){return N(e.isActive)},to:"/",children:"Home"}),Object(u.jsx)(r.c,{className:function(e){return N(e.isActive)},to:"/people",children:"People"})]})})}),Object(u.jsx)("main",{className:"section",children:Object(u.jsx)("div",{className:"container",children:Object(u.jsxs)(s.d,{children:[Object(u.jsx)(s.b,{path:"/",element:Object(u.jsx)("h1",{className:"title",children:"Home Page"})}),Object(u.jsx)(s.b,{path:"/home",element:Object(u.jsx)(s.a,{to:"/",replace:!0})}),Object(u.jsxs)(s.b,{path:"/people",children:[Object(u.jsx)(s.b,{index:!0,element:Object(u.jsx)(v,{})}),Object(u.jsx)(s.b,{path:":slug",element:Object(u.jsx)(v,{})})]}),Object(u.jsx)(s.b,{path:"*",element:Object(u.jsx)("h1",{className:"title",children:"Page not found"})})]})})})]})};a.a.render(Object(u.jsx)(r.a,{children:Object(u.jsx)(g,{})}),document.getElementById("root"))}},[[37,1,2]]]);
//# sourceMappingURL=main.8f636e87.chunk.js.map